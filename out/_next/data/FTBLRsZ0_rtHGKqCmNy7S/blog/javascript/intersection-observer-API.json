{"pageProps":{"post":{"frontMatter":{"date":"2023-02-13T00:00:00","title":"Intersection Observer API","tags":["JavaScript"],"description":"Intersection Observer API 공식문서 읽고 정리해보기","published":true},"body":"> Intersection Observer API\r\n> 타겟 요소와 상위 요소 또는 최상위 document의 viewport 사이의 intersection(교차 범위) 내의 변화를 비동기적으로 관찰하는 방법\r\n>\r\n> Intersection Observer API 는 그들이 감시하고자 하는 요소가 다른 요소의 viewport에 들어가거나 나갈 때 또는 요청한 부분만큼 두 요소의 교차 부분이 변경될 때 마다 실행될 콜백 함수를 등록할 수 있게 한다.\r\n>\r\n> ✔️ 정확히 몇 픽셀 겹쳤는지 알려주는 것이 아닌 N% 정도로 상호작용일 일어났을 경우 발생\r\n\r\n```tsx\r\nconst observer = new IntersectionObserver(callback, options); // 관찰자 초기화\r\n// callback과 options 두 가지 인수를 전달 받는다.\r\n\r\nobserver.observe(element); // 관찰 대상(element) 등록\r\n```\r\n\r\n# Callback\r\n\r\n> Intersection Observer API Callback을 생성 조건\r\n>\r\n> - target 요소와 root 요소 (기기의 뷰포트나 설정 요소)가 교차할 경우\r\n> - observer가 최초로 타겟을 관측하도록 요청받을 때마다.\r\n\r\ncallback은 entries와 observer를 두가지 인자로 받는다.\r\n\r\n```tsx\r\nconst callback = (\r\n  entries: IntersectionObserverEntry[],\r\n  observer: IntersectionObserver\r\n) => {};\r\n```\r\n\r\n## entries\r\n\r\n: `IntersectionObserverEntry` 의 배열로 `IntersectionObserverEntry`은 다음과 같은 속성들을 포함하고 있다.\r\n\r\n```tsx\r\ninterface IntersectionObserverEntry {\r\n  readonly boundingClientRect: DOMRectReadOnly;\r\n  readonly intersectionRatio: number;\r\n  readonly intersectionRect: DOMRectReadOnly;\r\n  readonly isIntersecting: boolean;\r\n  readonly rootBounds: DOMRectReadOnly | null;\r\n  readonly target: Element;\r\n  readonly time: DOMHighResTimeStamp;\r\n}\r\n```\r\n\r\n![entries](/static/images/blog/intersection-observer-API-01.png)\r\n\r\n- `boundingClientRect` : target의 DOMReactReadOnly를 반환한다. target의 `Element.getBoundingClientRect()`과 같은 값을 얻을 수 있다.\r\n  ![boundingClientRect](/static/images/blog/intersection-observer-API-02.png)\r\n- `intersectionRatio` : target과 root의 교차 영역 비율로 0.0과 1.0 사이의 숫자를 반환한다. (아래 options의 threshold와 관련있다.)\r\n\r\n- `intersectionRect` : target과 viewport인 root의 교차 영역에 대한 DOMReactReadOnly를 반환한다.\r\n  ![intersectionRect](/static/images/blog/intersection-observer-API-03.png)\r\n- `isIntersecting` : target이 지정한 root 영역에 교차 상태로 들어가는지 여부를 나타내주는 `boolean`값이다.\r\n\r\n  `true`: root 내부에 포함\r\n\r\n  `false`: root 내부에 포함되지 않음\r\n\r\n- `rootBounds` : root 요소에 대한 DOMReactReadOnly를 반환한다. 이는 아래의 `rootMargin`이 반영된 값이며 별도의 root 값을 선언하지 않을 경우 `null`을 반환한다.\r\n  ![rootBounds](/static/images/blog/intersection-observer-API-04.png)\r\n- `target` : target의 Element를 반환한다.\r\n\r\n- `time` : 문서가 작성된 시간을 기준으로 교차 상태 변경이 발생한 시간을 나타내는 `DOMHighResTimeStamp`을 반환한다.\r\n\r\n## observer\r\n\r\n> callback을 호출하는 IntersectionObserver\r\n\r\n```tsx\r\ninterface IntersectionObserver {\r\n  readonly root: Element | Document | null;\r\n  readonly rootMargin: string;\r\n  readonly thresholds: ReadonlyArray<number>;\r\n  disconnect(): void;\r\n  observe(target: Element): void;\r\n  takeRecords(): IntersectionObserverEntry[];\r\n  unobserve(target: Element): void;\r\n}\r\n```\r\n\r\n![observer](/static/images/blog/intersection-observer-API-05.png)\r\n\r\n# Options\r\n\r\n> observer callback이 호출되는 상황을 조작할 수 있다.\r\n\r\n```tsx\r\nlet options = {\r\n  root: document.querySelector(\"#scrollArea\"),\r\n  rootMargin: \"0px\",\r\n  threshold: 1.0,\r\n};\r\n\r\nlet observer = new IntersectionObserver(callback, options);\r\n```\r\n\r\n## `root`\r\n\r\n- target의 가시성을 판단하기 위한 Element 혹은 viewport\r\n- target의 조상 요소야 한다.\r\n- 만일 `document`의 루트 요소(기본값)를 기준으로 하기 위해서는 `null` 값 선언\r\n\r\n## `rootMargin`\r\n\r\n- `root` 가 가지는 `margin`으로 root의 범위를 확장하거나 축소할 수 있다.\r\n- 기본값은 0px으로 px와 % 단위 사용이 가능하며 반드시 단위를 꼭 입력해주어야 한다(0일지라도).\r\n- 음수값일 경우 root 요소 축소, 양수값일 경우 root 요소 확장한다.\r\n\r\n## `threshold`\r\n\r\n- target이 얼만큼 보여졌을 때 observer가 콜백을 실행할 건지 설정하는 option, 기본값은 0이다.\r\n  만일 target이 50% 만큼 요소가 보여졌을때 탐지하고 싶다면, 값을 0.5로 설정한다. 혹은 25% 단위로 실행되게 하고 싶다면, `[0, 0.25, 0.5, 0.75, 1]` 과 같은 배열을 설정한다.\r\n- 기본값 0은 target이 1px이라도 보일때 콜백이 실행된다.\r\n\r\n# Method\r\n\r\n## `IntersectionObserver()`\r\n\r\n> options을 참조하여 callback을 호출하는 관찰자를 생성 및 초기화한다.\r\n\r\n```tsx\r\nobserver = new IntersectionObserver(callback, options);\r\n```\r\n\r\n## `observe()`\r\n\r\n> 관찰 대상인 target을 설정하고 관찰을 설정한다.\r\n\r\n```jsx\r\nconst element = document.getElementById(\"target\");\r\nobserver.observe(element);\r\n```\r\n\r\n## `unobserve()`\r\n\r\n> 넘겨준 target의 관찰을 종료한다.\r\n\r\n```jsx\r\nobserver.unobserve(element);\r\n```\r\n\r\n## `disconnect()`\r\n\r\n> 해당 관찰자의 관찰을 모두 종료한다.\r\n\r\n```jsx\r\nobserver.disconnect();\r\n```\r\n\r\n# 참조\r\n\r\n- [MDN Intersection Observer API](https://developer.mozilla.org/ko/docs/Web/API/Intersection_Observer_API)\r\n","fields":{"slug":"blog/javascript/intersection-observer-API"},"path":"C:/Users/dayeo/YODA/git/Personal Project/coyo-log/content/blog/javascript/intersection-observer-API.mdx"},"mdx":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    blockquote: \"blockquote\",\n    p: \"p\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    h1: \"h1\",\n    a: \"a\",\n    ul: \"ul\",\n    li: \"li\",\n    h2: \"h2\",\n    img: \"img\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"Intersection Observer API\\r\\n타겟 요소와 상위 요소 또는 최상위 document의 viewport 사이의 intersection(교차 범위) 내의 변화를 비동기적으로 관찰하는 방법\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"Intersection Observer API 는 그들이 감시하고자 하는 요소가 다른 요소의 viewport에 들어가거나 나갈 때 또는 요청한 부분만큼 두 요소의 교차 부분이 변경될 때 마다 실행될 콜백 함수를 등록할 수 있게 한다.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"✔️ 정확히 몇 픽셀 겹쳤는지 알려주는 것이 아닌 N% 정도로 상호작용일 일어났을 경우 발생\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-tsx\",\n      children: _jsxs(_components.code, {\n        className: \"language-tsx code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" observer \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"IntersectionObserver\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"callback\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// 관찰자 초기화\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// callback과 options 두 가지 인수를 전달 받는다.\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"observe\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"element\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token comment\",\n            children: \"// 관찰 대상(element) 등록\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.h1, {\n      id: \"callback\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#callback\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"Callback\"]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"Intersection Observer API Callback을 생성 조건\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"target 요소와 root 요소 (기기의 뷰포트나 설정 요소)가 교차할 경우\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"observer가 최초로 타겟을 관측하도록 요청받을 때마다.\"\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"callback은 entries와 observer를 두가지 인자로 받는다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-tsx\",\n      children: _jsxs(_components.code, {\n        className: \"language-tsx code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token function-variable function\",\n            children: \"callback\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  entries\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"IntersectionObserverEntry\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  observer\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"IntersectionObserver\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token arrow operator\",\n            children: \"=>\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"entries\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#entries\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"entries\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\": \", _jsx(_components.code, {\n        children: \"IntersectionObserverEntry\"\n      }), \" 의 배열로 \", _jsx(_components.code, {\n        children: \"IntersectionObserverEntry\"\n      }), \"은 다음과 같은 속성들을 포함하고 있다.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-tsx\",\n      children: _jsxs(_components.code, {\n        className: \"language-tsx code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"interface\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"IntersectionObserverEntry\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" boundingClientRect\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"DOMRectReadOnly\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" intersectionRatio\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"number\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" intersectionRect\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"DOMRectReadOnly\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" isIntersecting\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"boolean\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" rootBounds\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"DOMRectReadOnly\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"null\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" target\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"Element\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" time\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"DOMHighResTimeStamp\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/static/images/blog/intersection-observer-API-01.png\",\n        alt: \"entries\"\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"boundingClientRect\"\n          }), \" : target의 DOMReactReadOnly를 반환한다. target의 \", _jsx(_components.code, {\n            children: \"Element.getBoundingClientRect()\"\n          }), \"과 같은 값을 얻을 수 있다.\\r\\n\", _jsx(_components.img, {\n            src: \"/static/images/blog/intersection-observer-API-02.png\",\n            alt: \"boundingClientRect\"\n          })]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"intersectionRatio\"\n          }), \" : target과 root의 교차 영역 비율로 0.0과 1.0 사이의 숫자를 반환한다. (아래 options의 threshold와 관련있다.)\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"intersectionRect\"\n          }), \" : target과 viewport인 root의 교차 영역에 대한 DOMReactReadOnly를 반환한다.\\r\\n\", _jsx(_components.img, {\n            src: \"/static/images/blog/intersection-observer-API-03.png\",\n            alt: \"intersectionRect\"\n          })]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"isIntersecting\"\n          }), \" : target이 지정한 root 영역에 교차 상태로 들어가는지 여부를 나타내주는 \", _jsx(_components.code, {\n            children: \"boolean\"\n          }), \"값이다.\"]\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"true\"\n          }), \": root 내부에 포함\"]\n        }), \"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"false\"\n          }), \": root 내부에 포함되지 않음\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"rootBounds\"\n          }), \" : root 요소에 대한 DOMReactReadOnly를 반환한다. 이는 아래의 \", _jsx(_components.code, {\n            children: \"rootMargin\"\n          }), \"이 반영된 값이며 별도의 root 값을 선언하지 않을 경우 \", _jsx(_components.code, {\n            children: \"null\"\n          }), \"을 반환한다.\\r\\n\", _jsx(_components.img, {\n            src: \"/static/images/blog/intersection-observer-API-04.png\",\n            alt: \"rootBounds\"\n          })]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"target\"\n          }), \" : target의 Element를 반환한다.\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"time\"\n          }), \" : 문서가 작성된 시간을 기준으로 교차 상태 변경이 발생한 시간을 나타내는 \", _jsx(_components.code, {\n            children: \"DOMHighResTimeStamp\"\n          }), \"을 반환한다.\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"observer\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#observer\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"observer\"]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"callback을 호출하는 IntersectionObserver\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-tsx\",\n      children: _jsxs(_components.code, {\n        className: \"language-tsx code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"interface\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"IntersectionObserver\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" root\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"Element\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"Document\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"|\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"null\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" rootMargin\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"string\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"readonly\"\n          }), \" thresholds\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"ReadonlyArray\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"<\"\n          }), _jsx(_components.span, {\n            className: \"token builtin\",\n            children: \"number\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \">\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"disconnect\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"observe\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"target\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"Element\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"takeRecords\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"IntersectionObserverEntry\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"[\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"]\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  \", _jsx(_components.span, {\n            className: \"token function\",\n            children: \"unobserve\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"target\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token maybe-class-name\",\n            children: \"Element\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"void\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/static/images/blog/intersection-observer-API-05.png\",\n        alt: \"observer\"\n      })\n    }), \"\\n\", _jsxs(_components.h1, {\n      id: \"options\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#options\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"Options\"]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"observer callback이 호출되는 상황을 조작할 수 있다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-tsx\",\n      children: _jsxs(_components.code, {\n        className: \"language-tsx code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" options \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"{\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  root\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token dom variable\",\n            children: \"document\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"querySelector\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"#scrollArea\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  rootMargin\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"0px\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"  threshold\", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token number\",\n            children: \"1.0\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"}\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsx(_components.span, {\n          className: \"code-line\",\n          children: \"\\r\\n\"\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"let\"\n          }), \" observer \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"IntersectionObserver\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"callback\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"root\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#root\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), _jsx(_components.code, {\n        children: \"root\"\n      })]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"target의 가시성을 판단하기 위한 Element 혹은 viewport\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"target의 조상 요소야 한다.\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"만일 \", _jsx(_components.code, {\n          children: \"document\"\n        }), \"의 루트 요소(기본값)를 기준으로 하기 위해서는 \", _jsx(_components.code, {\n          children: \"null\"\n        }), \" 값 선언\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"rootmargin\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#rootmargin\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), _jsx(_components.code, {\n        children: \"rootMargin\"\n      })]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.code, {\n          children: \"root\"\n        }), \" 가 가지는 \", _jsx(_components.code, {\n          children: \"margin\"\n        }), \"으로 root의 범위를 확장하거나 축소할 수 있다.\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"기본값은 0px으로 px와 % 단위 사용이 가능하며 반드시 단위를 꼭 입력해주어야 한다(0일지라도).\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"음수값일 경우 root 요소 축소, 양수값일 경우 root 요소 확장한다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"threshold\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#threshold\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), _jsx(_components.code, {\n        children: \"threshold\"\n      })]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"target이 얼만큼 보여졌을 때 observer가 콜백을 실행할 건지 설정하는 option, 기본값은 0이다.\\r\\n만일 target이 50% 만큼 요소가 보여졌을때 탐지하고 싶다면, 값을 0.5로 설정한다. 혹은 25% 단위로 실행되게 하고 싶다면, \", _jsx(_components.code, {\n          children: \"[0, 0.25, 0.5, 0.75, 1]\"\n        }), \" 과 같은 배열을 설정한다.\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"기본값 0은 target이 1px이라도 보일때 콜백이 실행된다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.h1, {\n      id: \"method\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#method\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"Method\"]\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"intersectionobserver\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#intersectionobserver\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), _jsx(_components.code, {\n        children: \"IntersectionObserver()\"\n      })]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"options을 참조하여 callback을 호출하는 관찰자를 생성 및 초기화한다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-tsx\",\n      children: _jsx(_components.code, {\n        className: \"language-tsx code-highlight\",\n        children: _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"observer \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"new\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token class-name\",\n            children: \"IntersectionObserver\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"callback\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \",\"\n          }), \" options\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"observe\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#observe\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), _jsx(_components.code, {\n        children: \"observe()\"\n      })]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"관찰 대상인 target을 설정하고 관찰을 설정한다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-jsx\",\n      children: _jsxs(_components.code, {\n        className: \"language-jsx code-highlight\",\n        children: [_jsxs(_components.span, {\n          className: \"code-line\",\n          children: [_jsx(_components.span, {\n            className: \"token keyword\",\n            children: \"const\"\n          }), \" element \", _jsx(_components.span, {\n            className: \"token operator\",\n            children: \"=\"\n          }), \" \", _jsx(_components.span, {\n            className: \"token dom variable\",\n            children: \"document\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"getElementById\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token string\",\n            children: \"\\\"target\\\"\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\r\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"observe\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"element\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"unobserve\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#unobserve\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), _jsx(_components.code, {\n        children: \"unobserve()\"\n      })]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"넘겨준 target의 관찰을 종료한다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-jsx\",\n      children: _jsx(_components.code, {\n        className: \"language-jsx code-highlight\",\n        children: _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"unobserve\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), \"element\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.h2, {\n      id: \"disconnect\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#disconnect\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), _jsx(_components.code, {\n        children: \"disconnect()\"\n      })]\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"해당 관찰자의 관찰을 모두 종료한다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      className: \"language-jsx\",\n      children: _jsx(_components.code, {\n        className: \"language-jsx code-highlight\",\n        children: _jsxs(_components.span, {\n          className: \"code-line\",\n          children: [\"observer\", _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \".\"\n          }), _jsx(_components.span, {\n            className: \"token method function property-access\",\n            children: \"disconnect\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \"(\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \")\"\n          }), _jsx(_components.span, {\n            className: \"token punctuation\",\n            children: \";\"\n          }), \"\\n\"]\n        })\n      })\n    }), \"\\n\", _jsxs(_components.h1, {\n      id: \"참조\",\n      children: [_jsx(_components.a, {\n        \"aria-hidden\": \"true\",\n        tabIndex: \"-1\",\n        href: \"#참조\",\n        children: _jsx(_components.span, {\n          className: \"icon icon-link\"\n        })\n      }), \"참조\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://developer.mozilla.org/ko/docs/Web/API/Intersection_Observer_API\",\n          children: \"MDN Intersection Observer API\"\n        })\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}},"tags":[{"tag":"JavaScript","count":3},{"tag":"React","count":3},{"tag":"TypeScript","count":3},{"tag":"Network","count":3},{"tag":"Redux","count":1},{"tag":"Emotion","count":1},{"tag":"Gatsby","count":1},{"tag":"Lodash","count":1}]},"__N_SSG":true}