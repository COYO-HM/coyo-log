{"pageProps":{"posts":[{"frontMatter":{"date":"2024-01-22T00:00:00","title":"Vite + React + TypeScript 환경에서 Emotion Css Prop 사용하기","tags":["vite","react","emotion","typescript"],"series":[],"description":"vite + react + typescript 환경에서 emotion css prop 사용하기","thumbnail":"https://github.com/COYO-HM/COYO-HM.github.io/assets/56423604/a8924712-3db6-4ab6-abc8-eb2795ff4121","published":true,"path":"vite-react-ts-emotion-props-config.mdx","key":"vite-react-ts-emotion-props-config","blurThumbnail":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAr0lEQVR4nEWOIQvCUBSFF9as+xUmwWpaEAS7C6Ylo2g2WIz+AoPObFvVKhjcL7DIYMEN2cTLw7t3j7yn4mmHc+93jgOAAWgR1kCt72WljaeStHqqGh/dnJdSJsA+jrHc7OB2BrhcUwx7fUzCUExGRIVjvrUItqsI49EU89kCQRCg4bro+v7/kJkNXrI0k9PhKO1mSzzPk3UUyTlJbBsR5Zb43WGVFwWq6vGzlsjMxRvzIamzuaeqkwAAAABJRU5ErkJggg=="},"body":"`Vite` + `React` + `TypeScript` 환경에서 `Emotion` `css prop`를 사용하니 다음과 같이 계속 오류가 나는 것을 확인할 수 있었습니다.\n\n![Marquee-error](https://github.com/COYO-HM/COYO-HM.github.io/assets/56423604/941a92c1-5c15-459b-9709-663013f390bb)\n\n\n\n검색해보니 `TypeScript` 말고도 `Vite`에서도 `css prop`를 사용하려면 추가 설정을 해줘야 하는 것을 알게 되어서 한번 정리해두려고 합니다.\n\n# TypeScript 설정\n\n`tsconfig.json`\n\n```json\n{\n  \"compilerOptions\": {\n    ...\n    \"jsx\": \"react-jsx\",\n    \"jsxImportSource\": \"@emotion/react\",\n    ...\n  },\n  ...\n}\n```\n\n[[emotion 공식 문서] typescript](https://emotion.sh/docs/typescript)\n\n# Vite 설정\n\n`vite.config.ts`\n\n```tsx\nimport { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [\n    react({\n      jsxImportSource: \"@emotion/react\",\n      babel: {\n        plugins: [\"@emotion/babel-plugin\"],\n      },\n    }),\n  ],\n});\n```\n\n# 참조\n\n- [Configure Emotion with your Vite React Project](https://dev.to/glocore/configure-emotion-with-your-vite-react-project-7jl)\n- [[emotion 공식 문서] typescript](https://emotion.sh/docs/typescript)","fields":{"slug":"vite-react-ts-emotion-props-config"},"path":"vite-react-ts-emotion-props-config.mdx"},{"frontMatter":{"date":"2022-10-23T00:00:00","title":"Gatsby Markdown Post에 목차 추가하기","tags":["react","typescript","emotion","gatsby"],"series":["blog"],"description":"Gatsby Blog, Markdown Post에 목차 추가하고 링크 걸기 + 페이지 맨 위/아래로 가기 버튼 추가하기","thumbnail":"https://user-images.githubusercontent.com/56423604/275324825-c75b8367-2633-47b9-888b-4bb0cd4daf7a.png","published":true,"path":"gatsby-add-table-of-contents-in-gatsby.mdx","key":"gatsby-add-table-of-contents-in-gatsby","blurThumbnail":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAoklEQVR4nFWOPQrCQBCFcwXxHl7BU3gIW3tLsde4jReIdTAnsBNhiWJjuSRbuPlhwShsZp/MapOBN8XHx8yLADgAxHl3H1ot9rScx/SyHbMev3lGLBAxA27nByajGcbRFJfTnZHnRURVEJ1zsNairmqI9SGkqVu0bTMQ+6IsfJqmPkkSv403Xoidz7IjM9Jas2vCxX8PKKUgpUSeX2GMGbz+Ar4Xsbk3PuNnAAAAAElFTkSuQmCC"},"body":"# 목차 생성하기\n\n## tableOfContents\n\n이미 목차는 `gatsby-transformer-remark`에 의해 HTML로 생성되어 있다. 다음과 같은 query 를 입력해보면,\n\n```graphql\n{\n  allMarkdownRemark {\n    nodes {\n      tableOfContents\n    }\n  }\n}\n```\n\n```plaintext\n{\n  \"data\": {\n    \"allMarkdownRemark\": {\n      \"nodes\": [\n        {\n          \"tableOfContents\": \"<ul>\\n<li><a href=\\\"#greedy-algorithm%EC%9D%B4%EB%9E%80\\\">Greedy Algorithm이란?</a></li>\\n</ul>\"\n        },\n        {\n          \"tableOfContents\": \"<ul>\\n<li><a href=\\\"#implementation%EC%9D%B4%EB%9E%80\\\">Implementation이란?</a></li>\\n</ul>\"\n        },\n        {\n          \"tableOfContents\": \"<ul>\\n<li><a href=\\\"#%EB%AC%B8%EC%A0%9C-%EC%84%A4%EB%AA%85\\\">문제 설명</a></li>\\n<li><a href=\\\"#%EB%82%B4-%ED%92%80%EC%9D%B4\\\">내 풀이</a></li>\\n</ul>\"\n        },\n        {\n          \"tableOfContents\": \"<ul>\\n<li><a href=\\\"#%EB%AC%B8%EC%A0%9C-%EC%84%A4%EB%AA%85\\\">문제 설명</a></li>\\n<li><a href=\\\"#%EB%82%B4-%ED%92%80%EC%9D%B4\\\">내 풀이</a></li>\\n</ul>\"\n        },\n        ...\n        ]\n    }\n  },\n  \"extensions\": {}\n}\n\n```\n\n`<a>` tag로 이미 링크까지 제공하고 있음을 확인할 수 있다.\n\nPost Data를 부르는 부분에 다음과 같이 `tableOfContents`를 추가해준다.\n\n```typescript\nexport const queryMarkdownDataBySlug = graphql`\n  query queryMarkdownDataBySlug($slug: String) {\n    allMarkdownRemark(filter: { fields: { slug: { eq: $slug } } }) {\n      edges {\n        node {\n          html\n          tableOfContents\n          frontmatter {\n            title\n            summary\n            date(formatString: \"YYYY.MM.DD.\")\n            categories\n            thumbnail {\n              childImageSharp {\n                gatsbyImageData\n              }\n              publicURL\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n```\n\n목차 부분을 나타내는 컴포넌트(`PostTableOfContents.tsx`)를 생성해주고 `tableOfContents`를 넘겨준다.\n\n`PostTableOfContents.tsx`\n\n```typescript\nimport styled from \"@emotion/styled\";\n\ninterface IPostTableOfContentsProps {\n  tableOfContents: string;\n}\n\nconst TableofContents = styled.div``;\n\nconst PostTableOfContents = ({\n  tableOfContents,\n}: IPostTableOfContentsProps) => {\n  return (\n    <TableofContents dangerouslySetInnerHTML={{ __html: tableOfContents }} />\n  );\n};\n\nexport default PostTableOfContents;\n```\n\n`post_template.tsx`\n\n```typescript\nconst PostTemplate = ({\n  data: {\n    allMarkdownRemark: { edges },\n  },\n  location: { href },\n}: IPostTemplateProps) => {\n  const {\n    node: {\n      html,\n      tableOfContents,\n      frontmatter: {\n        title,\n        summary,\n        date,\n        categories,\n        thumbnail: {\n          childImageSharp: { gatsbyImageData },\n          publicURL,\n        },\n      },\n    },\n  } = edges[0];\n\n  return (\n    <Template title={title} description={summary} url={href} image={publicURL}>\n      <PostHead\n        title={title}\n        date={date}\n        categories={categories}\n        thumbnail={gatsbyImageData}\n      />\n      <PostContent html={html} />\n      <PostTableOfContents tableOfContents={tableOfContents} />\n      <CommentWidget />\n    </Template>\n  );\n};\n\nexport default PostTemplate;\n```\n\n## 링크 동작시키기\n\n`gatsby-transformer-remark`에서 제공하는 `<a>` tag가 동작하게 하기 위해서는 `gatsby-remark-autolink-headers` 플러그인이 필요하다.\n\n자신의 프로젝트에 맞게 `yarn`과 `npm` 중 하나를 골라 설치해준다.\n\n```shell\nyarn add gatsby-remark-autolink-headers\n\nnpm i gatsby-remark-autolink-headers\n```\n\n`gatsby-config.js` 파일에 다음과 같이 추가한다.\n\n```javascript\n...\n{\n  resolve: `gatsby-transformer-remark`,\n    options\n:\n  {\n    plugins: [\n      ...\n        `gatsby-remark-autolink-headers`,\n    ],\n  }\n}\n,\n...\n```\n\n위와 같이 추가해주는 이유는 `gatsby-remark-autolink-headers`은 `gatsby-transformer-remark` 플러그인의 플러그인이기 때문이다.\n\n# 목차 CSS 적용하기\n\n`post_template.tsx`에 다음과 같이 목차에 style을 추가해주었다.\n\n```typescript\nconst TableofContents = styled.div`\n  border-radius: 5px;\n  background-color: #b0a8b970;\n  padding: 15px;\n  width: 100%;\n`;\n```\n\nheader 1 에 속해있는 header 2와 같이 상속관계에 존재하는 header의 관계를 표현하고자 부모가 있는 header(상위 Header가 있는 header)의 경우, `padding-left`를 `5px`\n씩 추가하였다.\n\n```typescript\nconst TableofContents = styled.div`\n  border-radius: 5px;\n  background-color: #b0a8b970;\n  padding: 15px;\n  width: 100%;\n\n  * {\n    list-style: none;\n    padding-bottom: 5px;\n\n    &:last-child {\n      padding-bottom: 0;\n    }\n  }\n\n  * > ul > li {\n    padding-left: 5px;\n  }\n`;\n```\n\n# 페이지 맨 위/아래로 가기 버튼 추가하기\n\n생성한 목차 위아래에 페이지의 맨 위/아래로 가는 버튼을 추가했다.\n\n버튼 ui는 `FontAwesomeIcon`을 이용하였다.\n\n```typescript\nimport styled from '@emotion/styled'\nimport { faAngleDown, faAngleUp } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\n\n...\n\nconst PostTableOfContents = ({\n  tableOfContents,\n}: IPostTableOfContentsProps) => {\n    const onClickUpButton = useCallback(() => {\n    window?.scrollTo(0, 0)\n  }, [])\n\n  const onClickDownButton = useCallback(() => {\n    window?.scrollTo(0, document.body.scrollHeight)\n  }, [])\n  return (\n    <TableofContentsWrapper>\n      <UpButton>\n        <FontAwesomeIcon icon={faAngleUp} />\n      </UpButton>\n      <TableofContents dangerouslySetInnerHTML={{ __html: tableOfContents }} />\n      <DownButton>\n        <FontAwesomeIcon icon={faAngleDown} />\n      </DownButton>\n    </TableofContentsWrapper>\n  )\n}\n```\n\n버튼을 누르면 스크롤이 위로 아래로 움직이는 것을 확인할 수 있다.\n","fields":{"slug":"gatsby-add-table-of-contents-in-gatsby"},"path":"gatsby-add-table-of-contents-in-gatsby.mdx"}],"allTags":[{"tag":"all","count":42},{"tag":"typescript","count":12},{"tag":"react","count":12},{"tag":"javascript","count":11},{"tag":"nextjs","count":7},{"tag":"network","count":7},{"tag":"git","count":5},{"tag":"computer_science","count":4},{"tag":"npm","count":3},{"tag":"vite","count":3},{"tag":"husky","count":3},{"tag":"yarn","count":2},{"tag":"emotion","count":2},{"tag":"styled_components","count":2},{"tag":"css","count":2},{"tag":"redux","count":2},{"tag":"axios","count":2},{"tag":"yarn_berry","count":1},{"tag":"giscus","count":1},{"tag":"utterances","count":1},{"tag":"semamtic_release","count":1},{"tag":"github_actions","count":1},{"tag":"reg_exp","count":1},{"tag":"redux_persist","count":1},{"tag":"python3","count":1},{"tag":"react_beautiful_dnd","count":1},{"tag":"react_hook_form","count":1},{"tag":"recoil","count":1},{"tag":"next_intl","count":1},{"tag":"plaiceholder","count":1},{"tag":"gtag","count":1},{"tag":"google_analytics","count":1},{"tag":"lodash","count":1},{"tag":"commitlint","count":1},{"tag":"githubpage","count":1},{"tag":"intellij","count":1},{"tag":"gatsby","count":1},{"tag":"framer_motion","count":1},{"tag":"tailwind","count":1},{"tag":"vanilla_extract","count":1}],"selectedTag":"emotion","page":0},"__N_SSG":true}